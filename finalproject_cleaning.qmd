---
title: "Untitled"
format: html
editor: visual
---

## Cleaning

### Setup

```{r}
data <- read.csv("net_daily_bike_usage_22_25_weather.csv")
library(dplyr)
library(lubridate)
library(recipes)
```

### Holiday

```{r}
data$date <- as.Date(as.character(data$date))

data_rec <- recipe(~., data = data) |>
  step_holiday(date,
  holidays = c("LaborDay", "NewYearsDay", "ChristmasDay", "Easter", "GoodFriday", "USIndependenceDay", "USMemorialDay", "USThanksgivingDay", "USVeteransDay", "USMLKingsBirthday"),
  keep_original_cols = TRUE)


data_rec_prep <- prep(data_rec)
data <- bake(data_rec_prep, new_data = NULL)
## make new variable for is this a holiday
#step_holiday(holidays = timeDate::listHolidays("US"))
```

### Weather Dummies

```{r}
data <- data |> mutate(
  precip_dum = if_else(precip>0,1,0),
  snow_dum = if_else(snow>0,1,0)
)
```

```{r}
data_limited <- data |>
  select(date,New.Hampshire.Ave...T.St.NW, precip_dum, snow_dum) |>
  filter(date == "2023-12-19" | date == "2024-12-19")

View(data_limited)
```

```{r}
write.csv(data, "final_net_daily_bike_usage_22_25_weather.csv", row.names = FALSE)
```
